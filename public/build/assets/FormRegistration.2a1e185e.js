import{r as v,c as l,a as r,b as F,w as U,F as V,o as d,H as W,d as e,t as p,e as m,g as C,f as I,v as K,x as N,L as O,O as R,N as Y}from"./app.aafc8303.js";import{_ as q}from"./AuthenticatedLayout.d2af9473.js";import{_}from"./InputLabel.1caacf74.js";import{_ as h}from"./TextInput.8f146c8c.js";/* empty css                                                 */import{a as L}from"./index.971759e7.js";const z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," \u0627\u0644\u0639\u0642\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A ",-1),G={key:0},J={id:"alert-2",class:"p-4 mb-4 bg-green-300 rounded-lg dark:bg-green-300 text-center",role:"alert"},Q={class:"ml-3 text-sm font-medium text-green-700 dark:text-green-800"},X={key:1},Z={id:"alert-2",class:"p-4 mb-4 bg-red-300 rounded-lg dark:bg-red-300 text-center",role:"alert"},ee=["onSubmit"],te={class:"flex flex-row"},ae={class:"grow"},se={class:"py-6"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},re={className:"mb-4"},de=e("option",{selected:"",disabled:""},"\u0627\u0644\u0628\u0637\u0627\u0642\u0629",-1),ne=["value"],ie={key:0},ue={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ce={class:"p-6 bg-white border-b border-gray-200"},me=e("h2",{class:"text-center text-xl py-2"},"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629",-1),_e={className:"flex flex-col"},ve={className:"mb-4"},pe=["src"],be={className:"mb-4"},fe={key:0},ge={className:"text-red-600"},he={className:"text-red-600"},ye={className:"text-red-600"},xe={key:1},ke={className:"mb-4"},we={key:0},Ve={className:"mb-4"},Ne=e("option",{selected:"",disabled:""},"\u0627\u0644\u0645\u0646\u062F\u0648\u0628",-1),$e=["value"],Se={key:0},Ue={className:"mb-4"},Ce={className:"mb-4"},Te={className:"mb-4"},Ae={className:"mb-4"},De={key:0},Fe={className:"flex items-center justify-center my-6 "},Ie=["onClick","onKeyup","disabled"],Ke={key:0},Re={key:1},Pe={__name:"FormRegistration",props:{usersType:Array,sales:Array,cards:Array,apiKey:String,third_title_ar:String,phone:String},setup($){const T=$,s=v({created:v(A())});function A(){const o=new Date,t=o.getFullYear(),i=String(o.getMonth()+1).padStart(2,"0"),g=String(o.getDate()).padStart(2,"0");return`${t}-${i}-${g}`}const b=v(0);v(!1);const f=v(0),c=v(0),y=v(!1),S=()=>{y.value=!0,P([s.value.phone_number]),L.post("/api/formRegistration",s.value).then(o=>{f.value=o.data,s.value={created:v(A())},y.value=!1}).catch(o=>{f.value=!1,o.response&&o.response.data&&o.response.data?c.value=o.response.data:c.value={general:["\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639"]},y.value=!1})},M=o=>{const t=o.target.files[0];B(t)},B=o=>{const t=new FileReader;t.onload=i=>{s.value.image=i.target.result},t.readAsDataURL(o)};let D=null;const E=1e3,j=(o,t)=>{clearTimeout(D),D=setTimeout(()=>{H(o,t)},E)},H=(o,t)=>{L.get("/api/checkCard?card_number="+o+"&card_id="+t).then(i=>{b.value=i.data}).catch(i=>{b.value=0})},P=o=>{const t="https://api.textmebot.com/send.php",i=T.apiKey,g=n=>new Promise(k=>setTimeout(k,n));let x=Promise.resolve();o.forEach((n,k)=>{x=x.then(()=>{n.startsWith("0")&&(n=n.slice(1));const w=`\u0627\u0647\u0644\u0627\u064B \u0648\u0633\u0647\u0644\u0627\u064B \u0628\u0643..

\u0646\u0634\u0643\u0631 \u0627\u0646\u0636\u0645\u0627\u0645\u0643 \u0644\u0623\u0633\u0631\u0629 \u0627\u0644\u0647\u062F\u0641 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u060C \u0648\u0646\u0648\u062F \u0625\u0639\u0644\u0627\u0645\u0643 \u0628\u0623\u0646\u0647 \u062A\u0645 \u062A\u0646\u0634\u064A\u0637 \u0628\u0637\u0627\u0642\u062A\u0643 \u0627\u0644\u0635\u062D\u064A\u0629 \u0648\u0628\u0627\u0633\u062A\u0637\u0627\u0639\u062A\u0643 \u0627\u0644\u0627\u0633\u062A\u0641\u0627\u062F\u0629 \u0645\u0646 \u0643\u0627\u0641\u0629 \u062E\u062F\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629. \u0646\u062A\u0645\u0646\u0649 \u0644\u0643 \u062A\u062C\u0631\u0628\u0629 \u0633\u0639\u064A\u062F\u0629 \u0648\u0635\u062D\u0629 \u062C\u064A\u062F\u0629.

\u0644\u0644\u062A\u0630\u0643\u064A\u0631: \u064A\u0631\u062C\u0649 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0633\u0628\u0642 \u062F\u0627\u0626\u0645\u0627\u064B.

\u0644\u0644\u062D\u062C\u0632 \u0648\u0627\u0644\u0627\u0633\u062A\u0639\u0644\u0627\u0645\u060C \u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627 \u0639\u0644\u0649 \u0627\u0644\u0631\u0642\u0645:
\u{1F4F2}: `+T.phone+`

\u0645\u0646 \u0641\u0631\u064A\u0642 \u0627\u0644\u0647\u062F\u0641 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u060C \u0643\u0644 \u0627\u0644\u0645\u062D\u0628\u0629 \u0648\u062F\u0639\u0648\u0627\u062A\u0646\u0627 \u0628\u062A\u0645\u0627\u0645 \u0627\u0644\u0635\u062D\u0629 \u0648\u0627\u0644\u0639\u0627\u0641\u064A\u0629.`,a=`${t}?recipient=+964${n}&apikey=${i}&text=${encodeURIComponent(w)}&json=yes`;return fetch(a).then(u=>u.json()).then(u=>{if(u.status==="success")toast.success(`\u062A\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0625\u0644\u0649 ${n} \u0628\u0646\u062C\u0627\u062D`,{timeout:2e3,position:"bottom-right",rtl:!0});else throw new Error("\u0641\u0634\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644")}).catch(u=>{u.message==="NetworkError"?toast.success(`\u062A\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0625\u0644\u0649 ${n} (\u0628\u0648\u062C\u0648\u062F \u0645\u0634\u0643\u0644\u0629 \u0628\u0627\u0644\u0634\u0628\u0643\u0629)`,{timeout:2e3,position:"bottom-right",rtl:!0}):toast.error(`\u0641\u0634\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0625\u0644\u0649 ${n}`,{timeout:2e3,position:"bottom-right",rtl:!0})}).then(()=>g(5e3))})})};return(o,t)=>(d(),l(V,null,[r(F(W),{title:"Dashboard"}),r(q,null,{header:U(()=>[z]),default:U(()=>{var i,g,x,n,k,w;return[f.value?(d(),l("div",G,[e("div",J,[e("div",Q," \u062A\u0645 \u0627\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0628\u0646\u062C\u0627\u062D \u0631\u0642\u0645 "+p(f.value.card_number)+" \u0628\u0623\u0633\u0645 \u0627\u0644\u0632\u0628\u0648\u0646 "+p(f.value.name),1)])])):m("",!0),c.value&&!f.value?(d(),l("div",X,[e("div",Z,[(d(!0),l(V,null,C(c.value,(a,u)=>(d(),l("div",{key:u,class:"ml-3 text-sm font-medium text-red-700 dark:text-red-800"},p(c.value),1))),128))])])):m("",!0),e("form",{name:"createForm",onSubmit:R(S,["prevent"])},[e("div",te,[e("div",ae,[e("div",se,[e("div",oe,[e("div",le,[e("div",re,[r(_,{for:"sales_id",value:"\u0627\u0644\u0628\u0637\u0627\u0642\u0629"}),I(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.card_id=a),id:"userType",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[de,(d(!0),l(V,null,C($.cards,(a,u)=>(d(),l("option",{key:u,value:a.id},p(a.name),9,ne))),128))],512),[[K,s.value.card_id]]),(i=c.value)!=null&&i.saler_id?(d(),l("div",ie," \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):m("",!0)])]),s.value.card_id?(d(),l("div",ue,[e("div",ce,[me,e("div",_e,[e("div",ve,[r(_,{for:"name",value:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"}),e("img",{src:s.value.image},null,8,pe),e("input",{onChange:M,type:"file",accept:"image/*",class:"px-2 mt-3 py-1 font-bold text-white bg-rose-500 rounded"},null,32)]),e("div",be,[r(_,{for:"card_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"}),r(h,{id:"card_number",type:"number",class:"mt-1 block w-full",autofocus:"",onInput:t[1]||(t[1]=a=>j(s.value.card_number,s.value.card_id)),modelValue:s.value.card_number,"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.card_number=a)},null,8,["modelValue"]),b.value?(d(),l("span",fe,[N(" \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062A\u0645 \u062A\u0633\u062C\u064A\u0644\u0647\u0627 \u0642\u0628\u0644 \u0628\u0623\u0633\u0645 "),e("span",ge,p(b.value.name),1),N(" \u0644\u0644\u0645\u0646\u062F\u0648\u0628 "),e("span",he,p((g=b.value.user)==null?void 0:g.name),1),N(" \u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629 "),e("span",ye,p(b.value.family_name),1)])):m("",!0),(x=c.value)!=null&&x.card_number?(d(),l("div",xe," \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):m("",!0)]),e("div",ke,[r(_,{for:"name",value:"\u0627\u0644\u0623\u0633\u0645"}),r(h,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s.value.name,"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.name=a)},null,8,["modelValue"]),(n=c.value)!=null&&n.name?(d(),l("div",we," \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):m("",!0)]),e("div",Ve,[r(_,{for:"sales_id",value:"\u0627\u0644\u0645\u0646\u062F\u0648\u0628"}),I(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.value.saler_id=a),id:"userType",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[Ne,(d(!0),l(V,null,C($.sales,(a,u)=>(d(),l("option",{key:u,value:a.id},p(a.name),9,$e))),128))],512),[[K,s.value.saler_id]]),(k=c.value)!=null&&k.saler_id?(d(),l("div",Se," \u0627\u0644\u0645\u0646\u062F\u0648\u0628 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):m("",!0)]),e("div",Ue,[r(_,{for:"address",value:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),r(h,{id:"address",type:"text",class:"mt-1 block w-full",modelValue:s.value.address,"onUpdate:modelValue":t[5]||(t[5]=a=>s.value.address=a)},null,8,["modelValue"])]),e("div",Ce,[r(_,{for:"family_name",value:"\u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),r(h,{id:"family_name",type:"text",class:"mt-1 block w-full",modelValue:s.value.family_name,"onUpdate:modelValue":t[6]||(t[6]=a=>s.value.family_name=a)},null,8,["modelValue"])]),e("div",Te,[r(_,{for:"created",value:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u064A\u0639"}),r(h,{id:"created",type:"date",class:"mt-1 block w-full",modelValue:s.value.created,"onUpdate:modelValue":t[7]||(t[7]=a=>s.value.created=a)},null,8,["modelValue"])]),e("div",Ae,[r(_,{for:"phone_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"}),r(h,{id:"phone_number",type:"text",class:"mt-1 block w-full",modelValue:s.value.phone_number,"onUpdate:modelValue":t[8]||(t[8]=a=>s.value.phone_number=a)},null,8,["modelValue"]),(w=c.value)!=null&&w.phone_number?(d(),l("div",De," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):m("",!0)])])])])):m("",!0)])])])]),e("div",Fe,[r(F(O),{className:"px-6 mx-2 py-2 mb-12 text-white bg-gray-500 rounded-md focus:outline-none rounded",href:o.route("formRegistration")},{default:U(()=>[N(" \u0627\u0644\u0639\u0648\u062F\u0629 ")]),_:1},8,["href"]),e("button",{onClick:R(S,["prevent"]),onKeyup:Y(S,["enter"]),disabled:y.value,class:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-rose-500 rounded"},[y.value?(d(),l("span",Re,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(d(),l("span",Ke,"\u062D\u0641\u0638"))],40,Ie)])],40,ee)]}),_:1})],64))}};export{Pe as default};
