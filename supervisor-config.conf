# =====================================================
# ملف إعدادات Supervisor لتشغيل Queue Worker بشكل دائم
# =====================================================
# 
# كيفية الاستخدام:
# 1. انسخ محتوى هذا الملف
# 2. في SSH، أنشئ ملف جديد:
#    sudo nano /etc/supervisor/conf.d/laravel-queue.conf
# 3. الصق المحتوى التالي (عدّل المسارات حسب موقعك)
# 4. احفظ الملف
# 5. نفذ الأوامر التالية:
#    sudo supervisorctl reread
#    sudo supervisorctl update
#    sudo supervisorctl start laravel-queue-worker:*
#
# =====================================================

[program:laravel-queue-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /home/USERNAME/public_html/cms-ai/artisan queue:work database --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=USERNAME
numprocs=2
redirect_stderr=true
stdout_logfile=/home/USERNAME/public_html/cms-ai/storage/logs/queue-worker.log
stopwaitsecs=3600

# =====================================================
# ملاحظات:
# =====================================================
# - استبدل USERNAME باسم المستخدم الفعلي على CPanel
# - استبدل المسار /home/USERNAME/public_html/cms-ai/ بالمسار الفعلي لمشروعك
# - numprocs=2 يعني تشغيل عمليتين Worker (يمكنك زيادة الرقم)
# - max-time=3600 يعني إعادة تشغيل Worker كل ساعة لتجنب تسريب الذاكرة
# =====================================================

