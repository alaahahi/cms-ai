import{r as u,o as r,c as n,a as l,b as D,w as $,F as T,H as E,d as e,t as h,e as c,x as V,f as O,v as H,g as P,L as W,O as F,N as Y}from"./app.9727f8df.js";import{_ as q}from"./AuthenticatedLayout.3be7fe1a.js";import{_ as m}from"./InputLabel.cf075eb0.js";import{_ as b}from"./TextInput.23693df0.js";/* empty css                                                 */import{a as I}from"./index.e5cf6e5d.js";const z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," \u0627\u0644\u0639\u0642\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A ",-1),G={key:0},J={id:"alert-2",class:"p-4 mb-4 bg-green-300 rounded-lg dark:bg-green-300 text-center",role:"alert"},Q={class:"ml-3 text-sm font-medium text-green-700 dark:text-green-800"},X={key:1},Z=e("div",{id:"alert-2",class:"p-4 mb-4 bg-red-300 rounded-lg dark:bg-red-300 text-center",role:"alert"},[e("div",{class:"ml-3 text-sm font-medium text-red-700 dark:text-red-800"}," \u064A\u0631\u062C\u0649 \u0627\u062F\u062E\u0627\u0644 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 ")],-1),ee=[Z],te=["onSubmit"],se={class:"flex flex-row"},ae={class:"grow"},oe={class:"py-6"},le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ne={class:"p-6 bg-white border-b border-gray-200"},de=e("h2",{class:"text-center text-xl py-2"},"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629",-1),ie={className:"flex flex-col"},ue={className:"mb-4"},me=["src"],ce={className:"mb-4"},_e={key:0},pe={className:"text-red-600"},ve={className:"text-red-600"},fe={className:"text-red-600"},he={key:1},be={className:"mb-4"},ge={key:0},ye={className:"mb-4"},xe=e("option",{selected:"",disabled:""},"\u0627\u0644\u0645\u0646\u062F\u0648\u0628",-1),ke=["value"],we={key:0},Ve={className:"mb-4"},Ne={className:"mb-4"},Se={className:"mb-4"},$e={className:"mb-4"},Ue={key:0},Ce={className:"flex items-center justify-center my-6 "},Ae=["onClick","onKeyup","disabled"],De={key:0},Te={key:1},Be={__name:"FormRegistration",props:{usersType:Array,sales:Array,cards:Array,apiKey:String,third_title_ar:String,phone:String},setup(U){const N=U,a=u({created:u(C())});function C(){const s=new Date,t=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),f=String(s.getDate()).padStart(2,"0");return`${t}-${i}-${f}`}const _=u(0);u(!1);const p=u(0),v=u(0),g=u(!1),S=()=>{g.value=!0,j(a.value.phone_number,a.value.card_number),I.post("/api/formRegistration",a.value).then(s=>{p.value=s.data,a.value={created:u(C())},g.value=!1}).catch(s=>{p.value=0,v.value=s.response.data.errors,g.value=!1})},K=s=>{const t=s.target.files[0];R(t)},R=s=>{const t=new FileReader;t.onload=i=>{a.value.image=i.target.result},t.readAsDataURL(s)};let A=null;const L=1e3,M=s=>{clearTimeout(A),A=setTimeout(()=>{B(s)},L)},B=s=>{I.get("/api/checkCard?card_id="+s).then(t=>{_.value=t.data}).catch(t=>{_.value=0})},j=(s,t)=>{const i="https://api.textmebot.com/send.php",f=N.apiKey,k=`\u0627\u0647\u0644\u0627\u064B \u0648\u0633\u0647\u0644\u0627\u064B \u0628\u0643..

\u0646\u0634\u0643\u0631 \u0627\u0646\u0636\u0645\u0627\u0645\u0643 \u0644\u0623\u0633\u0631\u0629  `+N.third_title_ar+`\u060C \u0648\u0646\u0648\u062F \u0625\u0639\u0644\u0627\u0645\u0643 \u0628\u0623\u0646\u0647 \u062A\u0645 \u062A\u0646\u0634\u064A\u0637 \u0628\u0637\u0627\u0642\u062A\u0643 \u0627\u0644\u0635\u062D\u064A\u0629 \u0648\u0628\u0627\u0633\u062A\u0637\u0627\u0639\u062A\u0643 \u0627\u0644\u0627\u0633\u062A\u0641\u0627\u062F\u0629 \u0645\u0646 \u0643\u0627\u0641\u0629 \u062E\u062F\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0646\u062A\u0645\u0646\u0649 \u0644\u0643 \u062A\u062C\u0631\u0628\u0629 \u0633\u0639\u064A\u062F\u0629 \u0648\u0635\u062D\u0629 \u062C\u064A\u062F\u0629.

\u0644\u0644\u062A\u0630\u0643\u064A\u0631: \u064A\u0631\u062C\u0649 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0633\u0628\u0642 \u062F\u0627\u0626\u0645\u0627\u064B.

\u0644\u0644\u062D\u062C\u0632 \u0648\u0627\u0644\u0627\u0633\u062A\u0639\u0644\u0627\u0645\u060C \u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627 \u0639\u0644\u0649 \u0627\u0644\u0631\u0642\u0645:
\u{1F4F2}: `+N.phone+`

\u0645\u0646 \u0641\u0631\u064A\u0642 \u0627\u0644\u0647\u062F\u0641 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u060C \u0643\u0644 \u0627\u0644\u0645\u062D\u0628\u0629 \u0648\u062F\u0639\u0648\u0627\u062A\u0646\u0627 \u0628\u062A\u0645\u0627\u0645 \u0627\u0644\u0635\u062D\u0629 \u0648\u0627\u0644\u0639\u0627\u0641\u064A\u0629.`,w=o=>new Promise(d=>setTimeout(d,o));let y=Promise.resolve();s&&(s.startsWith("0")&&(s=s.slice(1)),y=y.then(()=>{const o=`${i}?recipient=+964${s}&apikey=${f}&text=${encodeURIComponent(k)}&json=yes`;return fetch(o).then(d=>d.json()).then(d=>{if(d.status==="success"){const x=phoneNumbers.indexOf(s);x!==-1&&phoneNumbers.splice(x,1),toast.success("\u062A\u0645 \u0627\u0644\u0627\u0631\u0633\u0627\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})}else throw new Error("Sending failed")}).catch(d=>{const x=phoneNumbers.indexOf(s);x!==-1&&phoneNumbers.splice(x,1),d.message==="NetworkError"?toast.success("\u062A\u0645 \u0627\u0644\u0627\u0631\u0633\u0627\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}):toast.error("\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u0627\u0631\u0633\u0627\u0644",{timeout:2e3,position:"bottom-right",rtl:!0})}).then(()=>w(5e3))}))};return(s,t)=>(r(),n(T,null,[l(D(E),{title:"Dashboard"}),l(q,null,{header:$(()=>[z]),default:$(()=>{var i,f,k,w,y;return[p.value?(r(),n("div",G,[e("div",J,[e("div",Q," \u062A\u0645 \u0627\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0628\u0646\u062C\u0627\u062D \u0631\u0642\u0645 "+h(p.value.card_number)+" \u0628\u0623\u0633\u0645 \u0627\u0644\u0632\u0628\u0648\u0646 "+h(p.value.name),1)])])):c("",!0),v.value&&!p.value?(r(),n("div",X,ee)):c("",!0),e("form",{name:"createForm",onSubmit:F(S,["prevent"])},[e("div",se,[e("div",ae,[e("div",oe,[e("div",le,[e("div",re,[e("div",ne,[de,e("div",ie,[e("div",ue,[l(m,{for:"name",value:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"}),e("img",{src:a.value.image},null,8,me),e("input",{onChange:K,type:"file",accept:"image/*",class:"px-2 mt-3 py-1 font-bold text-white bg-rose-500 rounded"},null,32)]),e("div",ce,[l(m,{for:"card_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"}),l(b,{id:"card_number",type:"number",class:"mt-1 block w-full",autofocus:"",onInput:t[0]||(t[0]=o=>M(a.value.card_number)),modelValue:a.value.card_number,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.card_number=o)},null,8,["modelValue"]),_.value?(r(),n("span",_e,[V(" \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062A\u0645 \u062A\u0633\u062C\u064A\u0644\u0647\u0627 \u0642\u0628\u0644 \u0628\u0623\u0633\u0645 "),e("span",pe,h(_.value.name),1),V(" \u0644\u0644\u0645\u0646\u062F\u0648\u0628 "),e("span",ve,h((i=_.value.user)==null?void 0:i.name),1),V(" \u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629 "),e("span",fe,h(_.value.family_name),1)])):c("",!0),(f=v.value)!=null&&f.card_number?(r(),n("div",he," \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)]),e("div",be,[l(m,{for:"name",value:"\u0627\u0644\u0623\u0633\u0645"}),l(b,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:a.value.name,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.name=o)},null,8,["modelValue"]),(k=v.value)!=null&&k.name?(r(),n("div",ge," \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)]),e("div",ye,[l(m,{for:"sales_id",value:"\u0627\u0644\u0645\u0646\u062F\u0648\u0628"}),O(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.saler_id=o),id:"userType",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[xe,(r(!0),n(T,null,P(U.sales,(o,d)=>(r(),n("option",{key:d,value:o.id},h(o.name),9,ke))),128))],512),[[H,a.value.saler_id]]),(w=v.value)!=null&&w.saler_id?(r(),n("div",we," \u0627\u0644\u0645\u0646\u062F\u0648\u0628 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)]),e("div",Ve,[l(m,{for:"address",value:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),l(b,{id:"address",type:"text",class:"mt-1 block w-full",modelValue:a.value.address,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.address=o)},null,8,["modelValue"])]),e("div",Ne,[l(m,{for:"family_name",value:"\u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),l(b,{id:"family_name",type:"text",class:"mt-1 block w-full",modelValue:a.value.family_name,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.family_name=o)},null,8,["modelValue"])]),e("div",Se,[l(m,{for:"created",value:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u064A\u0639"}),l(b,{id:"created",type:"date",class:"mt-1 block w-full",modelValue:a.value.created,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.created=o)},null,8,["modelValue"])]),e("div",$e,[l(m,{for:"phone_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"}),l(b,{id:"phone_number",type:"text",class:"mt-1 block w-full",modelValue:a.value.phone_number,"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.phone_number=o)},null,8,["modelValue"]),(y=v.value)!=null&&y.phone_number?(r(),n("div",Ue," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)])])])])])])])]),e("div",Ce,[l(D(W),{className:"px-6 mx-2 py-2 mb-12 text-white bg-gray-500 rounded-md focus:outline-none rounded",href:s.route("formRegistration")},{default:$(()=>[V(" \u0627\u0644\u0639\u0648\u062F\u0629 ")]),_:1},8,["href"]),e("button",{onClick:F(S,["prevent"]),onKeyup:Y(S,["enter"]),disabled:g.value,class:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-rose-500 rounded"},[g.value?(r(),n("span",Te,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(r(),n("span",De,"\u062D\u0641\u0638"))],40,Ae)])],40,te)]}),_:1})],64))}};export{Be as default};
