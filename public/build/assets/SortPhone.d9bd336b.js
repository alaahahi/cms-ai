import{_ as M}from"./AuthenticatedLayout.0230a327.js";import{r as p,C as S,o as i,s as C,w as N,c,d as e,m as A,t as h,f,h as b,e as m,F as $,g as P,T as U,b as l,X as V,j as B,a as g,J as w,H as I}from"./app.08aa1128.js";import{a as D}from"./module.8acfb231.js";import{a as k}from"./index.eb06b2b4.js";import"./_plugin-vue_export-helper.cdc0426e.js";const E={key:0,class:"modal-mask"},T={class:"modal-wrapper"},H={class:"modal-container"},j={class:"modal-header"},F={class:"modal-body"},L={class:"text-center mb-4"},R={class:"mb-4"},q=e("label",null,"\u0639\u062F\u062F \u0627\u0644\u0623\u0631\u0642\u0627\u0645 \u0627\u0644\u062A\u064A \u062A\u0631\u064A\u062F \u0625\u0633\u0646\u0627\u062F\u0647\u0627:",-1),J=["max"],X={key:0,class:"text-center text-gray-500 py-3"},z={key:1},G={key:2,class:"max-h-64 overflow-y-auto border rounded p-2 bg-gray-50 text-sm"},K={key:0,class:"text-center text-gray-500"},O={class:"modal-footer my-4 flex justify-between"},Q={__name:"ModalAsinPhone",props:{show:Boolean,userId:Number,names:String},emits:["close","updated"],setup(u,{emit:_}){const o=u,d=p([]),n=p(!1),s=p(1);S(()=>o.show,async a=>{a&&await v()});async function v(){n.value=!0;try{const{data:a}=await k.get("/api/unassigned-numbers");d.value=a}catch(a){console.error("Error fetching unassigned numbers:",a)}finally{n.value=!1}}async function y(){const a=d.value.slice(0,s.value);console.log(a);try{await k.post("/api/assign-numbers",{user_id:o.userId,numbers:a.map(t=>t.id)}),d.value=d.value.slice(s.value),_("updated"),_("close")}catch(t){console.error("Error assigning numbers:",t)}}return(a,t)=>(i(),C(U,{name:"modal"},{default:N(()=>[u.show?(i(),c("div",E,[e("div",T,[e("div",H,[e("div",j,[A(a.$slots,"header")]),e("div",F,[e("h2",L,"\u0625\u0633\u0646\u0627\u062F \u0623\u0631\u0642\u0627\u0645 \u0647\u0627\u062A\u0641 \u0644\u0644\u0645\u0646\u062F\u0648\u0628 "+h(u.names),1),e("div",R,[q,f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value=r),type:"number",min:"1",max:d.value.length,class:"w-full p-2 border rounded mt-1"},null,8,J),[[b,s.value,void 0,{number:!0}]])]),d.value.length>0?(i(),c("div",X,"\u0639\u062F\u062F \u0627\u0644\u0623\u0631\u0642\u0627\u0645 \u0627\u0644\u062A\u064A \u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0625\u0633\u0646\u0627\u062F \u0644\u0644\u0645\u0646\u062F\u0648\u0628 "+h(d.value.length-s.value),1)):m("",!0),n.value?(i(),c("div",z,"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0623\u0631\u0642\u0627\u0645...")):(i(),c("ul",G,[(i(!0),c($,null,P(d.value.slice(0,s.value),r=>(i(),c("li",{key:r.id,class:"py-1 border-b"},h(r.phone),1))),128)),d.value.length===0?(i(),c("li",K,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0631\u0642\u0627\u0645 \u062D\u0627\u0644\u064A\u0627\u064B")):m("",!0)]))]),e("div",O,[e("button",{onClick:t[1]||(t[1]=r=>a.$emit("close")),class:"bg-gray-500 text-white px-4 py-2 rounded"},"\u062A\u0631\u0627\u062C\u0639"),e("button",{onClick:y,class:"bg-rose-500 text-white px-4 py-2 rounded"},"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0625\u0633\u0646\u0627\u062F")])])])])):m("",!0)]),_:3}))}};const W={key:0,class:"modal-mask"},Y={class:"modal-wrapper"},Z={class:"modal-container"},ee={class:"modal-header"},se=e("div",{class:"modal-body"}," \u0627\u0644\u0645\u0646\u062F\u0648\u0628\u064A\u0646 ",-1),te={className:"flex flex-col"},oe={className:"mb-4"},ae=e("label",{for:"name"},"\u0627\u0644\u0623\u0633\u0645",-1),ne={key:0,className:"text-red-600"},le={className:"mb-4"},de=e("label",{for:"email"},"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",-1),re={key:0,className:"text-red-600"},ie={className:"mb-4"},ce=e("label",{for:"password"},"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",-1),ue={key:0,className:"text-red-600"},me={class:"modal-footer my-2"},_e={class:"flex flex-row"},pe={class:"basis-1/2 px-4"},he={class:"basis-1/2 px-4"},ge={__name:"ModalUsers",props:{show:Boolean,data:String},emits:["close","a"],setup(u,{emit:_}){let o=p({name:"",email:"",password:""});return(d,n)=>(i(),C(U,{name:"modal"},{default:N(()=>[u.show?(i(),c("div",W,[e("div",Y,[e("div",Z,[e("div",ee,[A(d.$slots,"header")]),se,e("div",null,[e("form",null,[e("div",te,[e("div",oe,[ae,f(e("input",{id:"name",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm","onUpdate:modelValue":n[0]||(n[0]=s=>l(o).name=s),autofocus:""},null,512),[[b,l(o).name]]),l(o).name?m("",!0):(i(),c("span",ne," \u0627\u0644\u0623\u0633\u0645 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 "))]),e("div",le,[de,f(e("input",{id:"email",type:"email",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm","onUpdate:modelValue":n[1]||(n[1]=s=>l(o).email=s)},null,512),[[b,l(o).email]]),!l(o).email||!l(o).email.includes("@")||!l(o).email.includes(".com")?(i(),c("span",re," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 \u0627\u064A\u0645\u064A\u0644 \u0645\u062B\u0644 alaa@cms.com ")):m("",!0)]),e("div",ie,[ce,f(e("input",{id:"password",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm","onUpdate:modelValue":n[2]||(n[2]=s=>l(o).password=s)},null,512),[[b,l(o).password]]),l(o).password.length<8?(i(),c("span",ue," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 \u0645\u0646 8 \u0627\u0631\u0642\u0627\u0645 \u0627\u0648 \u0627\u062D\u0631\u0641 \u0627\u0646\u0643\u0644\u064A\u0632\u064A\u0629 ")):m("",!0)])])])]),e("div",me,[e("div",_e,[e("div",pe,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:n[3]||(n[3]=s=>{d.$emit("close")})},"\u062A\u0631\u0627\u062C\u0639")]),e("div",he,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:n[4]||(n[4]=s=>{d.$emit("a",l(o))})},"\u062D\u0641\u0638")])])])])])])):m("",!0)]),_:3}))}};const fe={class:"p-6"},be=e("h1",{class:"text-2xl font-bold mb-4 text-gray-800 dark:text-white"}," \u0627\u0633\u0646\u0627\u062F \u0627\u0644\u0627\u0631\u0642\u0627\u0645 \u0644\u0644\u0645\u0646\u062F\u0648\u0628\u064A\u0646",-1),ve={class:"overflow-x-auto"},ye={class:"overflow-x-auto rounded-lg"},xe={id:"default-table",class:"w-full text-sm text-gray-700"},we=e("thead",{class:"bg-gray-100 text-xs uppercase"},[e("tr",null,[e("th",{class:"px-4 py-3 text-center"},"#"),e("th",{class:"px-4 py-3 text-center"},"\u0627\u0644\u0645\u0646\u062F\u0648\u0628"),e("th",{class:"px-4 py-3 text-center"},"\u062A\u0646\u0641\u064A\u0630")])],-1),$e={class:"px-4 py-2 text-center"},ke={class:"px-4 py-2 text-center"},Ne={class:"px-4 py-2 text-center"},Ce=["data-id","data-name","className"],Ve={__name:"SortPhone",props:{users:Array},setup(u){const _=V();let o=p(!1),d=0,n="",s=p(!1);const v=(a,t)=>{d=a,n=t,o.value=!0};B(()=>{const a=document.querySelector("#default-table");a&&(new D(a,{perPage:10,perPageSelect:[5,10,25,50],searchable:!0,fixedHeight:!0,pagination:!0,perPageDropdown:[5,10,25,50],labels:{placeholder:"\u0628\u062D\u062B...",perPage:"\u0639\u0631\u0636 \u0643\u0644 \u0635\u0641\u062D\u0629",noRows:"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A",info:"\u0639\u0631\u0636 {start} \u0625\u0644\u0649 {end} \u0645\u0646 \u0623\u0635\u0644 {rows} \u0633\u062C\u0644"}}),a.addEventListener("click",t=>{const r=t.target.getAttribute("data-id"),x=t.target.getAttribute("data-name");v(r,x)}))});const y=a=>{k.post("/api/add-user",a).then(t=>{s.value=!1,_.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062F\u0648\u0628 \u0628\u0646\u062C\u0627\u062D"),window.location.reload()}).catch(t=>{t.response.status==422&&_.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 \u0627\u0648 \u0627\u0644\u0627\u064A\u0645\u064A\u0644 \u0645\u0633\u062A\u062E\u062F\u0645 \u0645\u0646 \u0642\u0628\u0644 \u064A\u0631\u062C\u0649 \u0643\u062A\u0627\u0628\u0629 \u0627\u064A\u0645\u064A\u0644 \u062C\u062F\u064A\u062F")})};return(a,t)=>(i(),c($,null,[g(l(I),{title:"Dashboard"}),g(Q,{show:l(o),userId:l(d),names:l(n),onClose:t[0]||(t[0]=r=>w(o)?o.value=!1:o=!1),onA:a.assignPhone},null,8,["show","userId","names","onA"]),g(ge,{show:l(s),onClose:t[1]||(t[1]=r=>w(s)?s.value=!1:s=!1),onA:y},null,8,["show"]),g(M,null,{default:N(()=>[e("div",fe,[be,e("div",ve,[e("div",ye,[e("button",{onClick:t[2]||(t[2]=r=>w(s)?s.value=!0:s=!0),class:"px-6 py-2 mb-4 font-bold text-white bg-blue-500 rounded"},"\u0627\u0636\u0627\u0641\u0629 \u0645\u0646\u062F\u0648\u0628"),e("table",xe,[we,e("tbody",null,[(i(!0),c($,null,P(u.users,(r,x)=>(i(),c("tr",{key:r.id,class:"border-b hover:bg-gray-50 dark:hover:bg-gray-900"},[e("td",$e,h(x+1),1),e("td",ke,h(r.name),1),e("td",Ne,[e("button",{tabIndex:"1","data-id":r.id,"data-name":r.name,className:"px-3 py-1 text-white mx-1 bg-rose-600 rounded user-"+r.id},"\u0627\u0633\u0646\u0627\u062F",8,Ce)])]))),128))])])])])])]),_:1})],64))}};export{Ve as default};
