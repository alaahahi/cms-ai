import{o as d,a as c,h as a,n as p,F as C,P as O,f as m,w as U,N as B,t as y,J as P,g as h,Q as N,R as $,b as j,m as v,u as n,e as k,H as V,d as I,L as E,j as F,k as L}from"./app.1663dec6.js";import{_ as R}from"./AuthenticatedLayout.5c40e18f.js";import{_ as b,a as _}from"./TextInput.fe9587e6.js";/* empty css                                                 */import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";let x;const D={getDeviceOrientation:function(e,t=!1){if(!e&&!x||(e||(e=x),!e||!e.beta||!e.gamma))return 0;const s=e.beta,l=e.gamma;let i=Math.atan2(l,s)*(180/Math.PI);const o=(screen.orientation||screen.mozOrientation||screen.msOrientation).angle||window.orientation||0;return i=Math.round(i+o),i<0&&(i=360+i),t?i:i>55&&i<=135?90:i>135&&i<225?180:i>=225&&i<305?270:0},isPortrait(e){const t=this.getDeviceOrientation(e);return t===0||t===180},isLandscape(e){const t=this.getDeviceOrientation(e);return t===90||t===270},isPortraitDefault(e){return this.getDeviceOrientation(e)===0},isPortraitReversed(e){return this.getDeviceOrientation(e)===180},isLandscapeRight(e){return this.getDeviceOrientation(e)===90},isLandscapeLeft(e){return this.getDeviceOrientation(e)===270},init(e=!1){if(window.DeviceOrientationEvent===void 0){if(e)throw new Error("DeviceOrientationEvent is not supported in current browser");return}window.addEventListener("deviceorientation",t=>{x=t},!0)}};function W(e,t,s,l){const r=t.width,i=t.height;(l===90||l===270)&&(t.width=i,t.height=r),l===90?s.translate(i,0):l===180?s.translate(r,i):l===270?s.translate(0,r):s.translate(0,0),s.rotate(l*Math.PI/180),s.drawImage(e,-e.width/2,-e.width/2,r,i)}const H={name:"Webcam",props:{rememberDevice:{type:Boolean,default:!0},preferCamerasWithLabel:{type:Array,default:["back","usb"]},classList:{type:String,default:"w-full h-auto"},constraints:{type:Object,default:{video:{width:{ideal:2560},height:{ideal:1440}},facingMode:"environment"}},tryToRotateImage:{type:Boolean,default:!0},imageType:{type:String,default:"image/jpeg"},rememberDeviceTokenName:{type:String,default:"_vwl_device_id"},autoStart:{type:Boolean,default:!0},audio:{type:Boolean,default:!0},shutterEffect:{type:Boolean,default:!0}},data(){return{deviceId:null,cameras:[],innited:!1}},emits:["clear","stop","start","pause","resume","error","unsupported","init","photoTaken"],async mounted(){this.setupMedia(),D.init()},beforeUnmount(){this.stop()},methods:{loadCameras(){navigator.mediaDevices.enumerateDevices().then(e=>{for(let t=0;t!==e.length;++t){let s=e[t];s.kind==="videoinput"&&this.cameras.find(l=>l.deviceId===s.deviceId)===void 0&&this.cameras.push(s)}}).then(()=>{this.innited||(this.deviceId===null&&this.autoStart&&this.start(),this.$emit("init",this.deviceId),this.innited=!0)}).catch(e=>this.$emit("unsupported",e))},changeCamera(e){if(this.deviceId!==e){this.deviceId=e;return}this.stop(),e&&this.loadCamera(e)},loadCamera(e){navigator.mediaDevices.getUserMedia(this.buildConstraints(e)).then(t=>{this.$refs.video.srcObject=t,this.rememberDevice&&window.localStorage.setItem(this.rememberDeviceTokenName,e)}).catch(t=>this.$emit("error",t))},legacyGetUserMediaSupport(){return e=>{let t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return t?new Promise(function(s,l){t.call(navigator,e,s,l)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}},testMediaAccess(){navigator.mediaDevices.getUserMedia(this.buildConstraints()).then(e=>{e.getTracks().forEach(s=>{s.stop()}),this.loadCameras()}).catch(e=>this.$emit("error",e))},setupMedia(){navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=this.legacyGetUserMediaSupport()),this.testMediaAccess()},clear(e){e.srcObject.getTracks().forEach(t=>{t.stop(),this.$refs.video.srcObject=null,this.source=null}),this.$emit("clear")},stop(){var e;(e=this.$refs.video)!=null&&e.srcObject&&this.clear(this.$refs.video),this.$emit("stop")},start(){if(this.deviceId)this.loadCamera(this.deviceId);else{const e=window.localStorage.getItem(this.rememberDeviceTokenName);if(e&&this.rememberDevice&&this.cameras.find(t=>t.deviceId===e))this.deviceId=e;else if(this.cameras.length>1)for(const t of this.preferCamerasWithLabel){const s=this.cameras.find(l=>l.label.toLowerCase().indexOf(t)!==-1);if(s){this.deviceId=s.deviceId;break}}!this.deviceId&&this.cameras.length>0&&this.cameras[0].deviceId}this.$emit("start")},pause(){var e;(e=this.$refs.video)!=null&&e.srcObject&&this.$refs.video.pause(),this.$emit("pause")},resume(){var e;(e=this.$refs.video)!=null&&e.srcObject&&this.$refs.video.play(),this.$emit("resume")},buildConstraints(e){const s={...{video:!0,audio:!1},...this.constraints};return e&&((typeof s.video!="object"||s.video===null)&&(s.video={}),s.video.deviceId={exact:e}),s},async takePhoto(){let e=this.$refs.video,t=this.$refs.canvas;t.height=e.videoHeight,t.width=e.videoWidth;let s=t.getContext("2d");W(e,t,s,this.tryToRotateImage?D.getDeviceOrientation():0);let l=t.toDataURL(this.imageType);t.toBlob(r=>{this.audio&&this.$refs.audio.play(),this.shutterEffect&&(this.$refs.shutter.classList.add("on"),setTimeout(()=>{this.$refs.shutter.classList.remove("on")},30*2+45)),this.$emit("photoTaken",{blob:r,image_data_url:l})},this.imageType)}},watch:{deviceId:function(e){this.changeCamera(e)}}},A={ref:"canvas",style:{display:"none"}},G={class:"hidden"},q={ref:"audio",volume:"0.5",src:"https://www.soundjay.com/mechanical/camera-shutter-click-08.mp3"},z={ref:"shutter",class:"shutter"};function J(e,t,s,l,r,i){return d(),c(C,null,[a("video",{ref:"video",class:p(["w-full h-auto",{hidden:!r.deviceId,classList:!0}]),autoplay:""},null,2),a("canvas",A,null,512),a("div",G,[a("audio",q,null,512)]),a("div",z,null,512)],64)}const Q=S(H,[["render",J],["__scopeId","data-v-fa5f08cb"]]),K={components:{Webcam:Q},props:{reloadCamerasButton:{type:Object,default:{display:!1,text:"Reload cameras",css:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-500 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}},takePhotoButton:{type:Object,default:{display:!0,text:"Take a photo",css:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-500 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}},fullscreenButton:{type:Object,default:{display:!0,text:"Fullscreen",css:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-500 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}},selectCameraLabel:{type:String,default:"Select camera..."},fullscreenState:{type:Boolean,default:!1}},data(){return{cameras:[],deviceId:"",fullscreen:!1,photoTaken:!1,photoFailed:!1,reloadCamInterval:null}},emits:["clear","stop","start","pause","resume","error","unsupported","init","photoTaken","fullscreen"],beforeUnmount(){this.reloadCamInterval&&clearInterval(this.reloadCamInterval),this.exit()},methods:{async takePhoto(){try{await this.$refs.webcam.takePhoto(),this.photoTaken=!0,setTimeout(()=>{this.photoTaken=!1},500)}catch{this.photoFailed=!0,setTimeout(()=>{this.photoFailed=!1},500)}},loadCameras(){this.$refs.webcam.loadCameras(),this.cameras=this.$refs.webcam.cameras},webcamInit(e){this.deviceId=e,this.$emit("init",this.deviceId)},setCamera(){this.$refs.webcam.changeCamera(this.deviceId===""?null:this.deviceId)},flipCamera(){if(this.loadCameras(),this.cameras.length>1){let t=this.cameras.findIndex(s=>s.deviceId===this.deviceId)+1;t>=this.cameras.length&&(t=0),this.deviceId=this.cameras[t].deviceId,this.$refs.webcam.changeCamera(this.cameras[t].deviceId)}},toggleFullscreen(){this.fullscreen=!this.fullscreen,this.$emit("fullscreen",this.fullscreen),this.fullscreen?document.querySelector("#webcam-ui").requestFullscreen!==void 0?document.querySelector("#webcam-ui").requestFullscreen():document.fullscreenElement.requestFullscreen():document.exitFullscreen()},exit(){this.$refs.webcam.stop()},clear(){this.$emit("clear")},stop(){this.$emit("stop")},start(){this.$emit("start")},pause(){this.$emit("pause")},resume(){this.$emit("resume")},error(e){this.$emit("error",e)},unsupported(e){this.$emit("unsupported",e)},photoTakenEvent({blob:e,image_data_url:t}){this.$emit("photoTaken",{blob:e,image_data_url:t})}},mounted(){this.cameras=this.$refs.webcam.cameras,this.cameras.length===0&&(this.reloadCamInterval=setInterval(()=>{this.loadCameras(),this.cameras.length>0&&clearInterval(this.reloadCamInterval)},1e3))},watch:{fullscreenState:{immediate:!0,handler:function(e){this.fullscreen=e}}}},M=e=>(N("data-v-017e214c"),e=e(),$(),e),X={key:0,class:"flex flex-col justify-center py-2 mx-auto text-center sm:flex-row align-center"},Y={value:""},Z=["value"],ee={key:0,class:"button-control"},te={key:1,class:"pr-2"},se={key:2},ae={key:1,class:"fullscreen-ui",style:{background:"rgba(0,0,0,0.4)"}},ie={class:"flex items-center justify-center h-full"},re={class:"flex items-center justify-between p-8 align-center w-80"},oe=M(()=>a("button",{class:"text-white"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),ne=[oe],le=M(()=>a("button",{class:"text-white"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),de=[le];function ce(e,t,s,l,r,i){const w=O("Webcam");return d(),c("div",{class:p({"fullscreen-overlay":r.fullscreen,"":!r.fullscreen}),id:"webcam-ui"},[m(w,{ref:"webcam",onInit:i.webcamInit,onClear:i.clear,onStop:i.stop,onStart:i.start,onPause:i.pause,onResume:i.resume,onError:i.error,onUnsupported:i.unsupported,onPhotoTaken:i.photoTakenEvent,shutterEffect:r.fullscreen},null,8,["onInit","onClear","onStop","onStart","onPause","onResume","onError","onUnsupported","onPhotoTaken","shutterEffect"]),r.fullscreen?(d(),c("div",ae,[a("div",ie,[a("div",re,[a("div",{onClick:t[6]||(t[6]=(...o)=>i.toggleFullscreen&&i.toggleFullscreen(...o))},ne),a("div",{onClick:t[7]||(t[7]=(...o)=>i.takePhoto&&i.takePhoto(...o))},[a("button",{class:p(["camera",{"camera-success":r.photoTaken,"camera-failed":r.photoFailed}])},"\xA0",2)]),a("div",{onClick:t[8]||(t[8]=(...o)=>i.flipCamera&&i.flipCamera(...o)),class:p({invisible:r.cameras.length<2})},de,2)])])])):(d(),c("div",X,[a("div",{onClick:t[2]||(t[2]=(...o)=>i.loadCameras&&i.loadCameras(...o))},[U(a("select",{onChange:t[0]||(t[0]=(...o)=>i.setCamera&&i.setCamera(...o)),"onUpdate:modelValue":t[1]||(t[1]=o=>r.deviceId=o),class:"block w-full py-2 pl-3 pr-10 text-base border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[a("option",Y,y(s.selectCameraLabel),1),(d(!0),c(C,null,P(r.cameras,o=>(d(),c("option",{value:o.deviceId},y(o.label),9,Z))),256))],544),[[B,r.deviceId]])]),s.takePhotoButton.display?(d(),c("div",ee,[r.deviceId?(d(),c("button",{key:0,onClick:t[3]||(t[3]=(...o)=>i.takePhoto&&i.takePhoto(...o)),type:"button",class:p(s.takePhotoButton.css)},y(s.takePhotoButton.text),3)):h("",!0)])):h("",!0),s.reloadCamerasButton.display?(d(),c("div",te,[a("button",{onClick:t[4]||(t[4]=(...o)=>i.loadCameras&&i.loadCameras(...o)),type:"button",class:p(s.reloadCamerasButton.css)},y(s.reloadCamerasButton.text),3)])):h("",!0),s.fullscreenButton.display?(d(),c("div",se,[a("button",{onClick:t[5]||(t[5]=(...o)=>i.toggleFullscreen&&i.toggleFullscreen(...o)),type:"button",class:p(s.fullscreenButton.css)},y(s.fullscreenButton.text),3)])):h("",!0)]))],2)}const T=S(K,[["render",ce],["__scopeId","data-v-017e214c"]]),me=a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," \u0645\u062D\u0627\u0641\u0638\u0629 \u0643\u0631\u0643\u0648\u0643 - \u0627\u0644\u0639\u0642\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A ",-1),ue=["onSubmit"],he={class:"flex flex-row"},fe={class:"grow"},ve={class:"py-6"},pe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},be={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},_e={class:"p-6 bg-white border-b border-gray-200"},ge=a("h2",{class:"text-center text-xl py-2"},"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629",-1),ye={className:"flex flex-col"},we={className:"mb-4"},ke={key:0,className:"text-red-600"},xe={className:"mb-4"},Ce={key:0,className:"text-red-600"},Ie={className:"mb-4"},De={key:0,className:"text-red-600"},Te={className:"mb-4"},Se={key:0,className:"text-red-600"},Me={class:"flex flex-row"},Oe={class:"grow"},Ue={class:"pb-3"},Be={class:"mx-auto mx-7"},Pe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ne={class:"p-6 bg-white border-b border-gray-200"},$e={class:"flex flex-row"},je={class:"basis-1/2"},Ve={className:"mb-4 mx-5"},Ee={key:0,className:"text-red-600"},Fe={class:"basis-1/2"},Le={className:"mb-4 mx-5"},Re={key:0,className:"text-red-600"},We={className:"flex items-center justify-center my-6 "},He=a("button",{type:"submit",className:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-rose-500 rounded"}," \u062D\u0641\u0638 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A ",-1),Qe={__name:"Edit",props:{data:Array,url:String,sales:Array},setup(e){const t=e,s=j({name:t.data.name,birthdate:t.data.birthdate,certification:t.data.certification,job:t.data.job,address:t.data.address,phone_number:t.data.phone_number,invoice_number:t.data.invoice_number,relatives:t.data.relatives,saler_id:t.data.saler_id,card_number:t.data.card_number,family_name:t.data.family_name});let l=v(!1);v("\u0627\u0644\u064A\u0648\u0645"),v("\u0627\u0644\u0634\u0647\u0631"),v("\u0627\u0644\u0633\u0646\u0629"),v("\u0627\u0644\u064A\u0648\u0645"),v("\u0627\u0644\u0634\u0647\u0631"),v("\u0627\u0644\u0633\u0646\u0629");let r=v(!1);v([{key:"\u0628\u062F\u0648\u0646",name:"\u0628\u062F\u0648\u0646"},{key:"\u0627\u0628\u062A\u062F\u0627\u0626\u064A",name:"\u0627\u0628\u062A\u062F\u0627\u0626\u064A"},{key:"\u0627\u0639\u062F\u0627\u062F\u064A",name:"\u0627\u0639\u062F\u0627\u062F\u064A"},{key:"\u062F\u0628\u0644\u0648\u0645",name:"\u062F\u0628\u0644\u0648\u0645"},{key:"\u0628\u0643\u0627\u0644\u0648\u0631\u064A\u0648\u0633",name:"\u0628\u0643\u0627\u0644\u0648\u0631\u064A\u0648\u0633"},{key:"\u0645\u0627\u062C\u0633\u062A\u064A\u0631",name:"\u0645\u0627\u062C\u0633\u062A\u064A\u0631"},{key:"\u062F\u0643\u062A\u0648\u0631\u0627\u0647",name:"\u062F\u0643\u062A\u0648\u0631\u0627\u0647"}]),v([{key:"\u0642\u0631\u064A\u0628",name:"\u0642\u0631\u064A\u0628"},{key:"\u0628\u0639\u064A\u062F",name:"\u0628\u0639\u064A\u062F"}]),v([{key:"01",name:"01"},{key:"02",name:"02"},{key:"03",name:"03"},{key:"04",name:"04"},{key:"05",name:"05"},{key:"06",name:"06"},{key:"07",name:"07"},{key:"08",name:"08"},{key:"09",name:"09"}]);const i=()=>{s.post(route("formRegistrationstoreEdit",t.data.id))},w=g=>{s.husband_image=g.image_data_url,r.value=!1},o=g=>{s.wife_image=g.image_data_url,l.value=!1};return(g,u)=>(d(),c(C,null,[m(n(V),{title:"Dashboard"}),m(R,null,{header:k(()=>[me,n(r)?(d(),I(n(T),{key:0,onPhotoTaken:w})):h("",!0),n(l)?(d(),I(n(T),{key:1,onPhotoTaken:o})):h("",!0)]),default:k(()=>[a("form",{name:"createForm",onSubmit:L(i,["prevent"])},[a("div",he,[a("div",fe,[a("div",ve,[a("div",pe,[a("div",be,[a("div",_e,[ge,a("div",ye,[a("div",we,[m(b,{for:"card_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"}),m(_,{id:"card_number",type:"number",class:"mt-1 block w-full",modelValue:n(s).card_number,"onUpdate:modelValue":u[0]||(u[0]=f=>n(s).card_number=f)},null,8,["modelValue"]),n(s).errors.card_number?(d(),c("span",ke," \u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):h("",!0)]),a("div",xe,[m(b,{for:"name",value:"\u0627\u0644\u0623\u0633\u0645"}),m(_,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:n(s).name,"onUpdate:modelValue":u[1]||(u[1]=f=>n(s).name=f)},null,8,["modelValue"]),n(s).errors.name?(d(),c("span",Ce," \u0627\u0644\u0623\u0633\u0645 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):h("",!0)]),a("div",Ie,[m(b,{for:"address",value:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),m(_,{id:"address",type:"text",class:"mt-1 block w-full",modelValue:n(s).address,"onUpdate:modelValue":u[2]||(u[2]=f=>n(s).address=f)},null,8,["modelValue"]),n(s).errors.address?(d(),c("span",De," \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):h("",!0)]),a("div",Te,[m(b,{for:"family_name",value:"\u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),m(_,{id:"family_name",type:"text",class:"mt-1 block w-full",modelValue:n(s).family_name,"onUpdate:modelValue":u[3]||(u[3]=f=>n(s).family_name=f)},null,8,["modelValue"]),n(s).errors.family_name?(d(),c("span",Se," \u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):h("",!0)])])])])])])])]),a("div",Me,[a("div",Oe,[a("div",Ue,[a("div",Be,[a("div",Pe,[a("div",Ne,[a("div",$e,[a("div",je,[a("div",Ve,[m(b,{for:"invoice_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644"}),m(_,{id:"invoice_number",type:"number",class:"mt-1 block w-full",modelValue:n(s).invoice_number,"onUpdate:modelValue":u[4]||(u[4]=f=>n(s).invoice_number=f)},null,8,["modelValue"]),n(s).errors.invoice_number?(d(),c("span",Ee," \u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):h("",!0)])]),a("div",Fe,[a("div",Le,[m(b,{for:"phone_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"}),m(_,{id:"phone_number",type:"text",class:"mt-1 block w-full",modelValue:n(s).phone_number,"onUpdate:modelValue":u[5]||(u[5]=f=>n(s).phone_number=f)},null,8,["modelValue"]),n(s).errors.phone_number?(d(),c("span",Re," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):h("",!0)])])])])])])])])]),a("div",We,[m(n(E),{className:"px-6 mx-2 py-2 mb-12 text-white bg-gray-500 rounded-md focus:outline-none rounded",href:g.route("formRegistration")},{default:k(()=>[F(" \u0627\u0644\u0639\u0648\u062F\u0629 ")]),_:1},8,["href"]),He])],40,ue)]),_:1})],64))}};export{Qe as default};
