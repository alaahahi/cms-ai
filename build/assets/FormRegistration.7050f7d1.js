import{r as _,c as l,a as r,b as D,w as S,F as U,o as d,H as W,d as e,t as b,e as c,f as F,v as I,g as K,x as V,L as O,O as R,N as Y}from"./app.4ba1908a.js";import{_ as q}from"./AuthenticatedLayout.7858f6ad.js";import{_ as m}from"./InputLabel.c226e313.js";import{_ as g}from"./TextInput.ff1c5b1f.js";/* empty css                                                 */import{a as L}from"./index.b6702849.js";const z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," \u0627\u0644\u0639\u0642\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A ",-1),G={key:0},J={id:"alert-2",class:"p-4 mb-4 bg-green-300 rounded-lg dark:bg-green-300 text-center",role:"alert"},Q={class:"ml-3 text-sm font-medium text-green-700 dark:text-green-800"},X={key:1},Z=e("div",{id:"alert-2",class:"p-4 mb-4 bg-red-300 rounded-lg dark:bg-red-300 text-center",role:"alert"},[e("div",{class:"ml-3 text-sm font-medium text-red-700 dark:text-red-800"}," \u064A\u0631\u062C\u0649 \u0627\u062F\u062E\u0627\u0644 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 ")],-1),ee=[Z],te=["onSubmit"],ae={class:"flex flex-row"},se={class:"grow"},oe={class:"py-6"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},de={className:"mb-4"},ne=e("option",{selected:"",disabled:""},"\u0627\u0644\u0628\u0637\u0627\u0642\u0629",-1),ie=["value"],ue={key:0},ce={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},me={class:"p-6 bg-white border-b border-gray-200"},_e=e("h2",{class:"text-center text-xl py-2"},"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629",-1),ve={className:"flex flex-col"},be={className:"mb-4"},pe=["src"],he={className:"mb-4"},fe={key:0},ge={className:"text-red-600"},ye={className:"text-red-600"},xe={className:"text-red-600"},ke={key:1},we={className:"mb-4"},Ve={key:0},Ne={className:"mb-4"},$e=e("option",{selected:"",disabled:""},"\u0627\u0644\u0645\u0646\u062F\u0648\u0628",-1),Se=["value"],Ue={key:0},Ce={className:"mb-4"},Te={className:"mb-4"},Ae={className:"mb-4"},De={className:"mb-4"},Fe={key:0},Ie={className:"flex items-center justify-center my-6 "},Ke=["onClick","onKeyup","disabled"],Re={key:0},Le={key:1},We={__name:"FormRegistration",props:{usersType:Array,sales:Array,cards:Array,apiKey:String,third_title_ar:String,phone:String},setup(N){const C=N,a=_({created:_(T())});function T(){const o=new Date,t=o.getFullYear(),i=String(o.getMonth()+1).padStart(2,"0"),f=String(o.getDate()).padStart(2,"0");return`${t}-${i}-${f}`}const p=_(0);_(!1);const h=_(0),v=_(0),y=_(!1),$=()=>{y.value=!0,P([a.value.phone_number]),L.post("/api/formRegistration",a.value).then(o=>{h.value=o.data,a.value={created:_(T())},y.value=!1}).catch(o=>{h.value=0,v.value=o.response.data.errors,y.value=!1})},M=o=>{const t=o.target.files[0];B(t)},B=o=>{const t=new FileReader;t.onload=i=>{a.value.image=i.target.result},t.readAsDataURL(o)};let A=null;const E=1e3,j=(o,t)=>{clearTimeout(A),A=setTimeout(()=>{H(o,t)},E)},H=(o,t)=>{L.get("/api/checkCard?card_number="+o+"&card_id="+t).then(i=>{p.value=i.data}).catch(i=>{p.value=0})},P=o=>{const t="https://api.textmebot.com/send.php",i=C.apiKey,f=n=>new Promise(k=>setTimeout(k,n));let x=Promise.resolve();o.forEach((n,k)=>{x=x.then(()=>{n.startsWith("0")&&(n=n.slice(1));const w=`\u0627\u0647\u0644\u0627\u064B \u0648\u0633\u0647\u0644\u0627\u064B \u0628\u0643..

\u0646\u0634\u0643\u0631 \u0627\u0646\u0636\u0645\u0627\u0645\u0643 \u0644\u0623\u0633\u0631\u0629 \u0627\u0644\u0647\u062F\u0641 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u060C \u0648\u0646\u0648\u062F \u0625\u0639\u0644\u0627\u0645\u0643 \u0628\u0623\u0646\u0647 \u062A\u0645 \u062A\u0646\u0634\u064A\u0637 \u0628\u0637\u0627\u0642\u062A\u0643 \u0627\u0644\u0635\u062D\u064A\u0629 \u0648\u0628\u0627\u0633\u062A\u0637\u0627\u0639\u062A\u0643 \u0627\u0644\u0627\u0633\u062A\u0641\u0627\u062F\u0629 \u0645\u0646 \u0643\u0627\u0641\u0629 \u062E\u062F\u0645\u0627\u062A \u0627\u0644\u0628\u0637\u0627\u0642\u0629. \u0646\u062A\u0645\u0646\u0649 \u0644\u0643 \u062A\u062C\u0631\u0628\u0629 \u0633\u0639\u064A\u062F\u0629 \u0648\u0635\u062D\u0629 \u062C\u064A\u062F\u0629.

\u0644\u0644\u062A\u0630\u0643\u064A\u0631: \u064A\u0631\u062C\u0649 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0633\u0628\u0642 \u062F\u0627\u0626\u0645\u0627\u064B.

\u0644\u0644\u062D\u062C\u0632 \u0648\u0627\u0644\u0627\u0633\u062A\u0639\u0644\u0627\u0645\u060C \u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627 \u0639\u0644\u0649 \u0627\u0644\u0631\u0642\u0645:
\u{1F4F2}: `+C.phone+`

\u0645\u0646 \u0641\u0631\u064A\u0642 \u0627\u0644\u0647\u062F\u0641 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u060C \u0643\u0644 \u0627\u0644\u0645\u062D\u0628\u0629 \u0648\u062F\u0639\u0648\u0627\u062A\u0646\u0627 \u0628\u062A\u0645\u0627\u0645 \u0627\u0644\u0635\u062D\u0629 \u0648\u0627\u0644\u0639\u0627\u0641\u064A\u0629.`,s=`${t}?recipient=+964${n}&apikey=${i}&text=${encodeURIComponent(w)}&json=yes`;return fetch(s).then(u=>u.json()).then(u=>{if(u.status==="success")toast.success(`\u062A\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0625\u0644\u0649 ${n} \u0628\u0646\u062C\u0627\u062D`,{timeout:2e3,position:"bottom-right",rtl:!0});else throw new Error("\u0641\u0634\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644")}).catch(u=>{u.message==="NetworkError"?toast.success(`\u062A\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0625\u0644\u0649 ${n} (\u0628\u0648\u062C\u0648\u062F \u0645\u0634\u0643\u0644\u0629 \u0628\u0627\u0644\u0634\u0628\u0643\u0629)`,{timeout:2e3,position:"bottom-right",rtl:!0}):toast.error(`\u0641\u0634\u0644 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0625\u0644\u0649 ${n}`,{timeout:2e3,position:"bottom-right",rtl:!0})}).then(()=>f(5e3))})})};return(o,t)=>(d(),l(U,null,[r(D(W),{title:"Dashboard"}),r(q,null,{header:S(()=>[z]),default:S(()=>{var i,f,x,n,k,w;return[h.value?(d(),l("div",G,[e("div",J,[e("div",Q," \u062A\u0645 \u0627\u062F\u062E\u0627\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0628\u0646\u062C\u0627\u062D \u0631\u0642\u0645 "+b(h.value.card_number)+" \u0628\u0623\u0633\u0645 \u0627\u0644\u0632\u0628\u0648\u0646 "+b(h.value.name),1)])])):c("",!0),v.value&&!h.value?(d(),l("div",X,ee)):c("",!0),e("form",{name:"createForm",onSubmit:R($,["prevent"])},[e("div",ae,[e("div",se,[e("div",oe,[e("div",re,[e("div",le,[e("div",de,[r(m,{for:"sales_id",value:"\u0627\u0644\u0628\u0637\u0627\u0642\u0629"}),F(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.card_id=s),id:"userType",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[ne,(d(!0),l(U,null,K(N.cards,(s,u)=>(d(),l("option",{key:u,value:s.id},b(s.name),9,ie))),128))],512),[[I,a.value.card_id]]),(i=v.value)!=null&&i.saler_id?(d(),l("div",ue," \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)])]),a.value.card_id?(d(),l("div",ce,[e("div",me,[_e,e("div",ve,[e("div",be,[r(m,{for:"name",value:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"}),e("img",{src:a.value.image},null,8,pe),e("input",{onChange:M,type:"file",accept:"image/*",class:"px-2 mt-3 py-1 font-bold text-white bg-rose-500 rounded"},null,32)]),e("div",he,[r(m,{for:"card_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629"}),r(g,{id:"card_number",type:"number",class:"mt-1 block w-full",autofocus:"",onInput:t[1]||(t[1]=s=>j(a.value.card_number,a.value.card_id)),modelValue:a.value.card_number,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.card_number=s)},null,8,["modelValue"]),p.value?(d(),l("span",fe,[V(" \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062A\u0645 \u062A\u0633\u062C\u064A\u0644\u0647\u0627 \u0642\u0628\u0644 \u0628\u0623\u0633\u0645 "),e("span",ge,b(p.value.name),1),V(" \u0644\u0644\u0645\u0646\u062F\u0648\u0628 "),e("span",ye,b((f=p.value.user)==null?void 0:f.name),1),V(" \u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629 "),e("span",xe,b(p.value.family_name),1)])):c("",!0),(x=v.value)!=null&&x.card_number?(d(),l("div",ke," \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)]),e("div",we,[r(m,{for:"name",value:"\u0627\u0644\u0623\u0633\u0645"}),r(g,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:a.value.name,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.name=s)},null,8,["modelValue"]),(n=v.value)!=null&&n.name?(d(),l("div",Ve," \u0627\u0644\u0628\u0637\u0627\u0642\u0629\u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)]),e("div",Ne,[r(m,{for:"sales_id",value:"\u0627\u0644\u0645\u0646\u062F\u0648\u0628"}),F(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.saler_id=s),id:"userType",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[$e,(d(!0),l(U,null,K(N.sales,(s,u)=>(d(),l("option",{key:u,value:s.id},b(s.name),9,Se))),128))],512),[[I,a.value.saler_id]]),(k=v.value)!=null&&k.saler_id?(d(),l("div",Ue," \u0627\u0644\u0645\u0646\u062F\u0648\u0628 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)]),e("div",Ce,[r(m,{for:"address",value:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),r(g,{id:"address",type:"text",class:"mt-1 block w-full",modelValue:a.value.address,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.address=s)},null,8,["modelValue"])]),e("div",Te,[r(m,{for:"family_name",value:"\u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),r(g,{id:"family_name",type:"text",class:"mt-1 block w-full",modelValue:a.value.family_name,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.family_name=s)},null,8,["modelValue"])]),e("div",Ae,[r(m,{for:"created",value:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u064A\u0639"}),r(g,{id:"created",type:"date",class:"mt-1 block w-full",modelValue:a.value.created,"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.created=s)},null,8,["modelValue"])]),e("div",De,[r(m,{for:"phone_number",value:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"}),r(g,{id:"phone_number",type:"text",class:"mt-1 block w-full",modelValue:a.value.phone_number,"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.phone_number=s)},null,8,["modelValue"]),(w=v.value)!=null&&w.phone_number?(d(),l("div",Fe," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628 ")):c("",!0)])])])])):c("",!0)])])])]),e("div",Ie,[r(D(O),{className:"px-6 mx-2 py-2 mb-12 text-white bg-gray-500 rounded-md focus:outline-none rounded",href:o.route("formRegistration")},{default:S(()=>[V(" \u0627\u0644\u0639\u0648\u062F\u0629 ")]),_:1},8,["href"]),e("button",{onClick:R($,["prevent"]),onKeyup:Y($,["enter"]),disabled:y.value,class:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-rose-500 rounded"},[y.value?(d(),l("span",Le,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(d(),l("span",Re,"\u062D\u0641\u0638"))],40,Ke)])],40,te)]}),_:1})],64))}};export{We as default};
